// COPYRIGHT Â© 2018 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/4.9/esri/copyright.txt for details.

define(["require","exports","../../core/pbf","../../layers/graphics/OptimizedFeature","../../layers/graphics/OptimizedFeatureSet","../../layers/graphics/OptimizedGeometry"],function(e,t,a,r,s,n){function i(e){return e>=I.length?null:I[e]}function l(e){return e>=F.length?null:F[e]}function g(e){return e>=S.length?null:S[e]}function c(e){return e>=v.length?null:v[e]}function u(e){for(var t=new n.default,a=t.coords;e.next();)switch(e.tag()){case 3:for(var r=e.getUInt32(),s=e.pos()+r,i=0;e.pos()<s;)a[i++]=e.getSInt64();break;case 1:case 2:default:e.skip()}return t}function o(e){for(var t=new n.default,a=t.coords,r=t.lengths;e.next();)switch(e.tag()){case 2:for(var s=e.getUInt32(),i=e.pos()+s;e.pos()<i;)r.push(e.getUInt32());break;case 3:for(var l=e.getUInt32(),i=e.pos()+l,g=0;e.pos()<i;)a[g++]=e.getSInt64();break;case 1:default:e.skip()}return t}function p(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function y(e){for(var t={type:i(0)};e.next();)switch(e.tag()){case 1:t.name=e.getString();break;case 2:t.type=i(e.getEnum());break;case 3:t.alias=e.getString();break;case 4:t.sqlType=l(e.getEnum());break;case 5:case 6:default:e.skip()}return t}function f(e,t){for(var a=new r.default,s=0;e.next();)switch(e.tag()){case 1:var n=e.getMessage(),i=t[s++].name;a.attributes[i]=p(n);break;case 2:a.geometry=o(e.getMessage());break;case 4:a.centroid=u(e.getMessage());break;default:e.skip()}return a}function b(e){for(var t=[0,0];e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 3:case 4:t.push(e.getDouble());break;default:e.skip()}return t}function k(e){for(var t=[0,0];e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 3:case 4:t.push(e.getDouble());break;default:e.skip()}return t}function d(e){for(var t={originPosition:g(0)};e.next();)switch(e.tag()){case 1:t.originPosition=g(e.getEnum());break;case 2:t.scale=b(e.getMessage());break;case 3:t.translate=k(e.getMessage());break;default:e.skip()}return t}function T(e){for(var t={};e.next();)switch(e.tag()){case 1:t.shapeAreaFieldName=e.getString();break;case 2:t.shapeLengthFieldName=e.getString();break;case 3:t.units=e.getString();break;default:e.skip()}return t}function h(e){for(var t={};e.next();)switch(e.tag()){case 1:t.wkid=e.getUInt32();break;case 5:t.wkt=e.getString();break;case 2:case 3:case 4:default:e.skip()}return t}function m(e){var t=new s.default;for(t.geometryType=c(0);e.next();)switch(e.tag()){case 1:t.objectIdFieldName=e.getString();break;case 3:t.globalIdFieldName=e.getString();break;case 4:t.geohashFieldName=e.getString();break;case 5:t.geometryProperties=T(e.getMessage());break;case 7:t.geometryType=c(e.getEnum());break;case 8:t.spatialReference=h(e.getMessage());break;case 10:t.hasZ=e.getBool();break;case 11:t.hasM=e.getBool();break;case 12:var a=e.getMessage();t.transform=d(a);break;case 9:var r=e.getBool();t.exceededTransferLimit=r;break;case 13:var n=e.getMessage();t.fields.push(y(n));break;case 15:var i=e.getMessage();t.features.push(f(i,t.fields));break;case 2:case 6:default:e.skip()}return t}function q(e){for(var t={};e.next();)switch(e.tag()){case 1:t.featureResult=m(e.getMessage());break;default:e.skip()}return t}function w(e){for(var t=new a(new Uint8Array(e),new DataView(e)),r={};t.next();)switch(t.tag()){case 2:r.queryResult=q(t.getMessage());break;default:t.skip()}return r}Object.defineProperty(t,"__esModule",{value:!0});var I=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],F=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],v=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],S=["upperLeft","lowerLeft"];t.parseFeatureQuery=w});